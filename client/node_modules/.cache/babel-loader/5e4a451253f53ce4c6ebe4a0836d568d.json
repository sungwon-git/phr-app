{"ast":null,"code":"import _objectWithoutProperties from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/sungwonjung/dev/nodejs/phr/client/src/views/mail/MailView/MailList/MailItem.js\";\nimport React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useParams } from 'react-router';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport { Avatar, Box, Checkbox, IconButton, Hidden, Tooltip, Typography, colors, makeStyles } from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport LabelImportantIcon from '@material-ui/icons/LabelImportant';\nimport LabelImportantOutlinedIcon from '@material-ui/icons/LabelImportantOutlined';\nimport getInitials from 'src/utils/getInitials';\nimport { useSelector } from 'react-redux';\n\nfunction getTo(params, mailId) {\n  var systemLabel = params.systemLabel,\n      customLabel = params.customLabel;\n  var baseUrl = '/app/mail';\n\n  if (systemLabel) {\n    return \"\".concat(baseUrl, \"/\").concat(systemLabel, \"/\").concat(mailId);\n  }\n\n  if (customLabel) {\n    return \"\".concat(baseUrl, \"/label/\").concat(customLabel, \"/\").concat(mailId);\n  }\n\n  return baseUrl;\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2),\n      borderBottom: \"1px solid \".concat(theme.palette.divider),\n      display: 'flex',\n      alignItems: 'center',\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover\n      }\n    },\n    unread: {\n      position: 'relative',\n      '&:before': {\n        content: '\" \"',\n        height: '100%',\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        width: 4,\n        backgroundColor: theme.palette.error.main\n      },\n      '& $name, & $subject': {\n        fontWeight: theme.typography.fontWeightBold\n      }\n    },\n    selected: {\n      backgroundColor: theme.palette.action.selected\n    },\n    filterActive: {\n      color: colors.amber[400]\n    },\n    content: {\n      cursor: 'pointer',\n      textDecoration: 'none'\n    },\n    details: _defineProperty({}, theme.breakpoints.up('md'), {\n      display: 'flex',\n      alignItems: 'center',\n      flexGrow: 1\n    }),\n    name: _defineProperty({}, theme.breakpoints.up('md'), {\n      minWidth: 180,\n      flexBasis: 180\n    }),\n    subject: {\n      maxWidth: 400,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis'\n    },\n    message: {\n      maxWidth: 800,\n      flexGrow: 1,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      marginRight: 'auto'\n    },\n    label: {\n      fontFamily: theme.typography.fontFamily,\n      fontSize: theme.typography.pxToRem(12),\n      color: theme.palette.common.white,\n      paddingLeft: 4,\n      paddingRight: 4,\n      paddingTop: 2,\n      paddingBottom: 2,\n      borderRadius: 2,\n      '& + &': {\n        marginLeft: theme.spacing(1)\n      }\n    },\n    date: {\n      whiteSpace: 'nowrap'\n    }\n  };\n});\n\nfunction MailItem(_ref) {\n  var _clsx,\n      _this = this;\n\n  var className = _ref.className,\n      mail = _ref.mail,\n      onDeselect = _ref.onDeselect,\n      onSelect = _ref.onSelect,\n      selected = _ref.selected,\n      rest = _objectWithoutProperties(_ref, [\"className\", \"mail\", \"onDeselect\", \"onSelect\", \"selected\"]);\n\n  var classes = useStyles();\n  var params = useParams();\n\n  var _useSelector = useSelector(function (state) {\n    return state.mail;\n  }),\n      labels = _useSelector.labels;\n\n  var handleCheckboxChange = function handleCheckboxChange(event) {\n    return event.target.checked ? onSelect() : onDeselect();\n  };\n\n  var handleStarToggle = function handleStarToggle() {// dispatch action\n  };\n\n  var handleImportantToggle = function handleImportantToggle() {// dispatch action\n  };\n\n  var to = getTo(params, mail.id);\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: clsx(classes.root, (_clsx = {}, _defineProperty(_clsx, classes.unread, !mail.isUnread), _defineProperty(_clsx, classes.selected, selected), _clsx), className)\n  }, rest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Hidden, {\n    smDown: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    mr: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: selected,\n    onChange: handleCheckboxChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Starred\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleStarToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, mail.isStarred ? /*#__PURE__*/React.createElement(StarIcon, {\n    className: classes.filterActive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(StarBorderIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Important\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleImportantToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, mail.isImportant ? /*#__PURE__*/React.createElement(LabelImportantIcon, {\n    className: classes.filterActive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(LabelImportantOutlinedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(Box, {\n    minWidth: \"1px\",\n    display: \"flex\",\n    flexGrow: 1,\n    component: RouterLink,\n    to: to,\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: mail.from.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, getInitials(mail.from.name)), /*#__PURE__*/React.createElement(Box, {\n    minWidth: \"1px\",\n    ml: 1,\n    className: classes.details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textPrimary\",\n    className: classes.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, mail.from.name), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    className: classes.subject,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, mail.subject), /*#__PURE__*/React.createElement(Hidden, {\n    smDown: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    className: classes.message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    component: \"span\",\n    ml: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }\n  }, \"-\"), mail.message), mail.labelIds.length > 0 && /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    mx: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 15\n    }\n  }, mail.labelIds.map(function (labelId) {\n    var label = labels.find(function (_label) {\n      return _label.id === labelId;\n    });\n    if (!label) return null;\n    return /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        backgroundColor: label.color\n      },\n      key: label.id,\n      className: classes.label,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }, label.name);\n  }))), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.date,\n    color: \"textSecondary\",\n    variant: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 11\n    }\n  }, moment(mail.createdAt).format('DD MMM YYYY')))));\n}\n\nMailItem.propTypes = {\n  className: PropTypes.string,\n  mail: PropTypes.object.isRequired,\n  onDeselect: PropTypes.func,\n  onSelect: PropTypes.func,\n  selected: PropTypes.bool.isRequired\n};\nexport default MailItem;","map":{"version":3,"sources":["/Users/sungwonjung/dev/nodejs/phr/client/src/views/mail/MailView/MailList/MailItem.js"],"names":["React","Link","RouterLink","useParams","PropTypes","clsx","moment","Avatar","Box","Checkbox","IconButton","Hidden","Tooltip","Typography","colors","makeStyles","StarIcon","StarBorderIcon","LabelImportantIcon","LabelImportantOutlinedIcon","getInitials","useSelector","getTo","params","mailId","systemLabel","customLabel","baseUrl","useStyles","theme","root","backgroundColor","palette","background","default","padding","spacing","borderBottom","divider","display","alignItems","action","hover","unread","position","content","height","left","top","width","error","main","fontWeight","typography","fontWeightBold","selected","filterActive","color","amber","cursor","textDecoration","details","breakpoints","up","flexGrow","name","minWidth","flexBasis","subject","maxWidth","whiteSpace","overflow","textOverflow","message","marginRight","label","fontFamily","fontSize","pxToRem","common","white","paddingLeft","paddingRight","paddingTop","paddingBottom","borderRadius","marginLeft","date","MailItem","className","mail","onDeselect","onSelect","rest","classes","state","labels","handleCheckboxChange","event","target","checked","handleStarToggle","handleImportantToggle","to","id","isUnread","isStarred","isImportant","from","avatar","labelIds","length","map","labelId","find","_label","createdAt","format","propTypes","string","object","isRequired","func","bool"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAI,IAAIC,UAAjB,QAAmC,kBAAnC;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SACEC,MADF,EAEEC,GAFF,EAGEC,QAHF,EAIEC,UAJF,EAKEC,MALF,EAMEC,OANF,EAOEC,UAPF,EAQEC,MARF,EASEC,UATF,QAUO,mBAVP;AAWA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,kBAAP,MAA+B,mCAA/B;AACA,OAAOC,0BAAP,MAAuC,2CAAvC;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,SAASC,KAAT,CAAeC,MAAf,EAAuBC,MAAvB,EAA+B;AAC7B,MAAQC,WAAR,GAAqCF,MAArC,CAAQE,WAAR;AAAA,MAAqBC,WAArB,GAAqCH,MAArC,CAAqBG,WAArB;AACA,MAAMC,OAAO,GAAG,WAAhB;;AAEA,MAAIF,WAAJ,EAAiB;AACf,qBAAUE,OAAV,cAAqBF,WAArB,cAAoCD,MAApC;AACD;;AAED,MAAIE,WAAJ,EAAiB;AACf,qBAAUC,OAAV,oBAA2BD,WAA3B,cAA0CF,MAA1C;AACD;;AAED,SAAOG,OAAP;AACD;;AAED,IAAMC,SAAS,GAAGb,UAAU,CAAC,UAACc,KAAD;AAAA,SAAY;AACvCC,IAAAA,IAAI,EAAE;AACJC,MAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcC,UAAd,CAAyBC,OADtC;AAEJC,MAAAA,OAAO,EAAEN,KAAK,CAACO,OAAN,CAAc,CAAd,CAFL;AAGJC,MAAAA,YAAY,sBAAeR,KAAK,CAACG,OAAN,CAAcM,OAA7B,CAHR;AAIJC,MAAAA,OAAO,EAAE,MAJL;AAKJC,MAAAA,UAAU,EAAE,QALR;AAMJ,iBAAW;AACTT,QAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcS,MAAd,CAAqBC;AAD7B;AANP,KADiC;AAWvCC,IAAAA,MAAM,EAAE;AACNC,MAAAA,QAAQ,EAAE,UADJ;AAEN,kBAAY;AACVC,QAAAA,OAAO,EAAE,KADC;AAEVC,QAAAA,MAAM,EAAE,MAFE;AAGVF,QAAAA,QAAQ,EAAE,UAHA;AAIVG,QAAAA,IAAI,EAAE,CAJI;AAKVC,QAAAA,GAAG,EAAE,CALK;AAMVC,QAAAA,KAAK,EAAE,CANG;AAOVlB,QAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAckB,KAAd,CAAoBC;AAP3B,OAFN;AAWN,6BAAuB;AACrBC,QAAAA,UAAU,EAAEvB,KAAK,CAACwB,UAAN,CAAiBC;AADR;AAXjB,KAX+B;AA0BvCC,IAAAA,QAAQ,EAAE;AACRxB,MAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcS,MAAd,CAAqBc;AAD9B,KA1B6B;AA6BvCC,IAAAA,YAAY,EAAE;AACZC,MAAAA,KAAK,EAAE3C,MAAM,CAAC4C,KAAP,CAAa,GAAb;AADK,KA7ByB;AAgCvCb,IAAAA,OAAO,EAAE;AACPc,MAAAA,MAAM,EAAE,SADD;AAEPC,MAAAA,cAAc,EAAE;AAFT,KAhC8B;AAoCvCC,IAAAA,OAAO,sBACJhC,KAAK,CAACiC,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CADI,EACyB;AAC5BxB,MAAAA,OAAO,EAAE,MADmB;AAE5BC,MAAAA,UAAU,EAAE,QAFgB;AAG5BwB,MAAAA,QAAQ,EAAE;AAHkB,KADzB,CApCgC;AA2CvCC,IAAAA,IAAI,sBACDpC,KAAK,CAACiC,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CADC,EAC4B;AAC5BG,MAAAA,QAAQ,EAAE,GADkB;AAE5BC,MAAAA,SAAS,EAAE;AAFiB,KAD5B,CA3CmC;AAiDvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,QAAQ,EAAE,GADH;AAEPC,MAAAA,UAAU,EAAE,QAFL;AAGPC,MAAAA,QAAQ,EAAE,QAHH;AAIPC,MAAAA,YAAY,EAAE;AAJP,KAjD8B;AAuDvCC,IAAAA,OAAO,EAAE;AACPJ,MAAAA,QAAQ,EAAE,GADH;AAEPL,MAAAA,QAAQ,EAAE,CAFH;AAGPM,MAAAA,UAAU,EAAE,QAHL;AAIPC,MAAAA,QAAQ,EAAE,QAJH;AAKPC,MAAAA,YAAY,EAAE,UALP;AAMPE,MAAAA,WAAW,EAAE;AANN,KAvD8B;AA+DvCC,IAAAA,KAAK,EAAE;AACLC,MAAAA,UAAU,EAAE/C,KAAK,CAACwB,UAAN,CAAiBuB,UADxB;AAELC,MAAAA,QAAQ,EAAEhD,KAAK,CAACwB,UAAN,CAAiByB,OAAjB,CAAyB,EAAzB,CAFL;AAGLrB,MAAAA,KAAK,EAAE5B,KAAK,CAACG,OAAN,CAAc+C,MAAd,CAAqBC,KAHvB;AAILC,MAAAA,WAAW,EAAE,CAJR;AAKLC,MAAAA,YAAY,EAAE,CALT;AAMLC,MAAAA,UAAU,EAAE,CANP;AAOLC,MAAAA,aAAa,EAAE,CAPV;AAQLC,MAAAA,YAAY,EAAE,CART;AASL,eAAS;AACPC,QAAAA,UAAU,EAAEzD,KAAK,CAACO,OAAN,CAAc,CAAd;AADL;AATJ,KA/DgC;AA4EvCmD,IAAAA,IAAI,EAAE;AACJjB,MAAAA,UAAU,EAAE;AADR;AA5EiC,GAAZ;AAAA,CAAD,CAA5B;;AAiFA,SAASkB,QAAT,OAOG;AAAA;AAAA;;AAAA,MANDC,SAMC,QANDA,SAMC;AAAA,MALDC,IAKC,QALDA,IAKC;AAAA,MAJDC,UAIC,QAJDA,UAIC;AAAA,MAHDC,QAGC,QAHDA,QAGC;AAAA,MAFDrC,QAEC,QAFDA,QAEC;AAAA,MADEsC,IACF;;AACD,MAAMC,OAAO,GAAGlE,SAAS,EAAzB;AACA,MAAML,MAAM,GAAGpB,SAAS,EAAxB;;AACA,qBAAmBkB,WAAW,CAAC,UAAC0E,KAAD;AAAA,WAAWA,KAAK,CAACL,IAAjB;AAAA,GAAD,CAA9B;AAAA,MAAQM,MAAR,gBAAQA,MAAR;;AAEA,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,KAAD;AAAA,WAAYA,KAAK,CAACC,MAAN,CAAaC,OAAb,GAAuBR,QAAQ,EAA/B,GAAoCD,UAAU,EAA1D;AAAA,GAA7B;;AAEA,MAAMU,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM,CAC7B;AACD,GAFD;;AAIA,MAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM,CAClC;AACD,GAFD;;AAIA,MAAMC,EAAE,GAAGjF,KAAK,CAACC,MAAD,EAASmE,IAAI,CAACc,EAAd,CAAhB;AAEA,sBACE;AACE,IAAA,SAAS,EAAEnG,IAAI,CACbyF,OAAO,CAAChE,IADK,sCAGVgE,OAAO,CAACnD,MAHE,EAGO,CAAC+C,IAAI,CAACe,QAHb,0BAIVX,OAAO,CAACvC,QAJE,EAISA,QAJT,WAMbkC,SANa;AADjB,KASMI,IATN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAWE,oBAAC,MAAD;AAAQ,IAAA,MAAM,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AACE,IAAA,EAAE,EAAE,CADN;AAEE,IAAA,OAAO,EAAC,MAFV;AAGE,IAAA,UAAU,EAAC,QAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,QAAD;AACE,IAAA,OAAO,EAAEtC,QADX;AAEE,IAAA,QAAQ,EAAE0C,oBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eASE,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAEI,gBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGX,IAAI,CAACgB,SAAL,gBACC,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAEZ,OAAO,CAACtC,YAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,gBAGC,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADF,CATF,eAkBE,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAE8C,qBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGZ,IAAI,CAACiB,WAAL,gBACC,oBAAC,kBAAD;AAAoB,IAAA,SAAS,EAAEb,OAAO,CAACtC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,gBAGC,oBAAC,0BAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADF,CAlBF,CADF,CAXF,eAyCE,oBAAC,GAAD;AACE,IAAA,QAAQ,EAAC,KADX;AAEE,IAAA,OAAO,EAAC,MAFV;AAGE,IAAA,QAAQ,EAAE,CAHZ;AAIE,IAAA,SAAS,EAAEtD,UAJb;AAKE,IAAA,EAAE,EAAEqG,EALN;AAME,IAAA,SAAS,EAAET,OAAO,CAACjD,OANrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAE6C,IAAI,CAACkB,IAAL,CAAUC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGzF,WAAW,CAACsE,IAAI,CAACkB,IAAL,CAAU3C,IAAX,CADd,CARF,eAWE,oBAAC,GAAD;AACE,IAAA,QAAQ,EAAC,KADX;AAEE,IAAA,EAAE,EAAE,CAFN;AAGE,IAAA,SAAS,EAAE6B,OAAO,CAACjC,OAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,UAAD;AACE,IAAA,OAAO,EAAC,OADV;AAEE,IAAA,KAAK,EAAC,aAFR;AAGE,IAAA,SAAS,EAAEiC,OAAO,CAAC7B,IAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGyB,IAAI,CAACkB,IAAL,CAAU3C,IALb,CALF,eAYE,oBAAC,UAAD;AACE,IAAA,OAAO,EAAC,OADV;AAEE,IAAA,KAAK,EAAC,eAFR;AAGE,IAAA,SAAS,EAAE6B,OAAO,CAAC1B,OAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGsB,IAAI,CAACtB,OALR,CAZF,eAmBE,oBAAC,MAAD;AAAQ,IAAA,MAAM,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AACE,IAAA,OAAO,EAAC,OADV;AAEE,IAAA,KAAK,EAAC,eAFR;AAGE,IAAA,SAAS,EAAE0B,OAAO,CAACrB,OAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,GAAD;AACE,IAAA,SAAS,EAAC,MADZ;AAEE,IAAA,EAAE,EAAE,CAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SALF,EAWGiB,IAAI,CAACjB,OAXR,CADF,EAcGiB,IAAI,CAACoB,QAAL,CAAcC,MAAd,GAAuB,CAAvB,iBACC,oBAAC,GAAD;AACE,IAAA,OAAO,EAAC,MADV;AAEE,IAAA,EAAE,EAAE,CAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIGrB,IAAI,CAACoB,QAAL,CAAcE,GAAd,CAAkB,UAACC,OAAD,EAAa;AAC9B,QAAMtC,KAAK,GAAGqB,MAAM,CAACkB,IAAP,CAAY,UAACC,MAAD;AAAA,aAAYA,MAAM,CAACX,EAAP,KAAcS,OAA1B;AAAA,KAAZ,CAAd;AAEA,QAAI,CAACtC,KAAL,EAAY,OAAO,IAAP;AAEZ,wBACE;AACE,MAAA,KAAK,EAAE;AAAE5C,QAAAA,eAAe,EAAE4C,KAAK,CAAClB;AAAzB,OADT;AAEE,MAAA,GAAG,EAAEkB,KAAK,CAAC6B,EAFb;AAGE,MAAA,SAAS,EAAEV,OAAO,CAACnB,KAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGA,KAAK,CAACV,IALT,CADF;AASD,GAdA,CAJH,CAfJ,CAnBF,eAwDE,oBAAC,UAAD;AACE,IAAA,SAAS,EAAE6B,OAAO,CAACP,IADrB;AAEE,IAAA,KAAK,EAAC,eAFR;AAGE,IAAA,OAAO,EAAC,SAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGjF,MAAM,CAACoF,IAAI,CAAC0B,SAAN,CAAN,CAAuBC,MAAvB,CAA8B,aAA9B,CALH,CAxDF,CAXF,CAzCF,CADF;AAwHD;;AAED7B,QAAQ,CAAC8B,SAAT,GAAqB;AACnB7B,EAAAA,SAAS,EAAErF,SAAS,CAACmH,MADF;AAEnB7B,EAAAA,IAAI,EAAEtF,SAAS,CAACoH,MAAV,CAAiBC,UAFJ;AAGnB9B,EAAAA,UAAU,EAAEvF,SAAS,CAACsH,IAHH;AAInB9B,EAAAA,QAAQ,EAAExF,SAAS,CAACsH,IAJD;AAKnBnE,EAAAA,QAAQ,EAAEnD,SAAS,CAACuH,IAAV,CAAeF;AALN,CAArB;AAQA,eAAejC,QAAf","sourcesContent":["import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useParams } from 'react-router';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport {\n  Avatar,\n  Box,\n  Checkbox,\n  IconButton,\n  Hidden,\n  Tooltip,\n  Typography,\n  colors,\n  makeStyles\n} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport LabelImportantIcon from '@material-ui/icons/LabelImportant';\nimport LabelImportantOutlinedIcon from '@material-ui/icons/LabelImportantOutlined';\nimport getInitials from 'src/utils/getInitials';\nimport { useSelector } from 'react-redux';\n\nfunction getTo(params, mailId) {\n  const { systemLabel, customLabel } = params;\n  const baseUrl = '/app/mail';\n\n  if (systemLabel) {\n    return `${baseUrl}/${systemLabel}/${mailId}`;\n  }\n\n  if (customLabel) {\n    return `${baseUrl}/label/${customLabel}/${mailId}`;\n  }\n\n  return baseUrl;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(2),\n    borderBottom: `1px solid ${theme.palette.divider}`,\n    display: 'flex',\n    alignItems: 'center',\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover\n    }\n  },\n  unread: {\n    position: 'relative',\n    '&:before': {\n      content: '\" \"',\n      height: '100%',\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: 4,\n      backgroundColor: theme.palette.error.main\n    },\n    '& $name, & $subject': {\n      fontWeight: theme.typography.fontWeightBold\n    }\n  },\n  selected: {\n    backgroundColor: theme.palette.action.selected\n  },\n  filterActive: {\n    color: colors.amber[400]\n  },\n  content: {\n    cursor: 'pointer',\n    textDecoration: 'none'\n  },\n  details: {\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n      alignItems: 'center',\n      flexGrow: 1\n    }\n  },\n  name: {\n    [theme.breakpoints.up('md')]: {\n      minWidth: 180,\n      flexBasis: 180\n    }\n  },\n  subject: {\n    maxWidth: 400,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  message: {\n    maxWidth: 800,\n    flexGrow: 1,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    marginRight: 'auto'\n  },\n  label: {\n    fontFamily: theme.typography.fontFamily,\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.common.white,\n    paddingLeft: 4,\n    paddingRight: 4,\n    paddingTop: 2,\n    paddingBottom: 2,\n    borderRadius: 2,\n    '& + &': {\n      marginLeft: theme.spacing(1)\n    }\n  },\n  date: {\n    whiteSpace: 'nowrap'\n  }\n}));\n\nfunction MailItem({\n  className,\n  mail,\n  onDeselect,\n  onSelect,\n  selected,\n  ...rest\n}) {\n  const classes = useStyles();\n  const params = useParams();\n  const { labels } = useSelector((state) => state.mail);\n\n  const handleCheckboxChange = (event) => (event.target.checked ? onSelect() : onDeselect());\n\n  const handleStarToggle = () => {\n    // dispatch action\n  };\n\n  const handleImportantToggle = () => {\n    // dispatch action\n  };\n\n  const to = getTo(params, mail.id);\n\n  return (\n    <div\n      className={clsx(\n        classes.root,\n        {\n          [classes.unread]: !mail.isUnread,\n          [classes.selected]: selected\n        },\n        className\n      )}\n      {...rest}\n    >\n      <Hidden smDown>\n        <Box\n          mr={1}\n          display=\"flex\"\n          alignItems=\"center\"\n        >\n          <Checkbox\n            checked={selected}\n            onChange={handleCheckboxChange}\n          />\n          <Tooltip title=\"Starred\">\n            <IconButton onClick={handleStarToggle}>\n              {mail.isStarred ? (\n                <StarIcon className={classes.filterActive} />\n              ) : (\n                <StarBorderIcon />\n              )}\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Important\">\n            <IconButton onClick={handleImportantToggle}>\n              {mail.isImportant ? (\n                <LabelImportantIcon className={classes.filterActive} />\n              ) : (\n                <LabelImportantOutlinedIcon />\n              )}\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </Hidden>\n      <Box\n        minWidth=\"1px\"\n        display=\"flex\"\n        flexGrow={1}\n        component={RouterLink}\n        to={to}\n        className={classes.content}\n      >\n        <Avatar src={mail.from.avatar}>\n          {getInitials(mail.from.name)}\n        </Avatar>\n        <Box\n          minWidth=\"1px\"\n          ml={1}\n          className={classes.details}\n        >\n          <Typography\n            variant=\"body2\"\n            color=\"textPrimary\"\n            className={classes.name}\n          >\n            {mail.from.name}\n          </Typography>\n          <Typography\n            variant=\"body2\"\n            color=\"textSecondary\"\n            className={classes.subject}\n          >\n            {mail.subject}\n          </Typography>\n          <Hidden smDown>\n            <Typography\n              variant=\"body2\"\n              color=\"textSecondary\"\n              className={classes.message}\n            >\n              <Box\n                component=\"span\"\n                ml={2}\n              >\n                -\n              </Box>\n              {mail.message}\n            </Typography>\n            {mail.labelIds.length > 0 && (\n              <Box\n                display=\"flex\"\n                mx={2}\n              >\n                {mail.labelIds.map((labelId) => {\n                  const label = labels.find((_label) => _label.id === labelId);\n\n                  if (!label) return null;\n\n                  return (\n                    <span\n                      style={{ backgroundColor: label.color }}\n                      key={label.id}\n                      className={classes.label}\n                    >\n                      {label.name}\n                    </span>\n                  );\n                })}\n              </Box>\n            )}\n          </Hidden>\n          <Typography\n            className={classes.date}\n            color=\"textSecondary\"\n            variant=\"caption\"\n          >\n            {moment(mail.createdAt).format('DD MMM YYYY')}\n          </Typography>\n        </Box>\n      </Box>\n    </div>\n  );\n}\n\nMailItem.propTypes = {\n  className: PropTypes.string,\n  mail: PropTypes.object.isRequired,\n  onDeselect: PropTypes.func,\n  onSelect: PropTypes.func,\n  selected: PropTypes.bool.isRequired\n};\n\nexport default MailItem;\n"]},"metadata":{},"sourceType":"module"}