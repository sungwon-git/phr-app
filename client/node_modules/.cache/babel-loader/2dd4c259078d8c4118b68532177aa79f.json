{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/sungwonjung/dev/nodejs/phr/client/src/views/kanban/KanbanView/CardEditModal/Checklist.js\";\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSnackbar } from 'notistack';\nimport { Box, Button, LinearProgress, Typography, TextField, SvgIcon, makeStyles } from '@material-ui/core';\nimport { List as ListIcon } from 'react-feather';\nimport { updateChecklist, deleteChecklist } from 'src/actions/kanbanActions';\nimport CheckItem from './CheckItem';\nimport CheckItemAdd from './CheckItemAdd';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    listIcon: {\n      marginRight: theme.spacing(3)\n    }\n  };\n});\n\nfunction Checklist(_ref) {\n  var _this = this;\n\n  var card = _ref.card,\n      checklist = _ref.checklist,\n      className = _ref.className,\n      rest = _objectWithoutProperties(_ref, [\"card\", \"checklist\", \"className\"]);\n\n  var classes = useStyles();\n  var dispatch = useDispatch();\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var _useState = useState(checklist.name),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      editingName = _useState4[0],\n      setEditingName = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      editingCheckItem = _useState6[0],\n      setEditingCheckItem = _useState6[1];\n\n  var handleNameEdit = function handleNameEdit() {\n    setEditingName(true);\n  };\n\n  var handleNameChange = function handleNameChange(event) {\n    event.persist();\n    setName(event.target.value);\n  };\n\n  var handleNameSave = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!(!name || name === checklist.name)) {\n                _context.next = 5;\n                break;\n              }\n\n              setEditingName(false);\n              setName(checklist.name);\n              return _context.abrupt(\"return\");\n\n            case 5:\n              setEditingName(false);\n              _context.next = 8;\n              return dispatch(updateChecklist(card.id, checklist.id, {\n                name: name\n              }));\n\n            case 8:\n              enqueueSnackbar('Checklist updated', {\n                variant: 'success'\n              });\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              enqueueSnackbar('Ooops!', {\n                variant: 'error'\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function handleNameSave() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleNameCancel = function handleNameCancel() {\n    setEditingName(false);\n    setName(checklist.name);\n  };\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return dispatch(deleteChecklist(card.id, checklist.id));\n\n            case 3:\n              enqueueSnackbar('Checklist deleted', {\n                variant: 'success'\n              });\n              _context2.next = 9;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](0);\n              enqueueSnackbar('Ooops!', {\n                variant: 'error'\n              });\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 6]]);\n    }));\n\n    return function handleDelete() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleCheckItemEditInit = function handleCheckItemEditInit(checkItemId) {\n    setEditingCheckItem(checkItemId);\n  };\n\n  var handleCheckItemEditCancel = function handleCheckItemEditCancel() {\n    setEditingCheckItem(null);\n  };\n\n  var handleCheckItemEditComplete = function handleCheckItemEditComplete() {\n    setEditingCheckItem(null);\n  };\n\n  var totalCheckItems = checklist.checkItems.length;\n  var completedCheckItems = checklist.checkItems.filter(function (checkItem) {\n    return checkItem.state === 'complete';\n  }).length;\n  var completePercentage = totalCheckItems === 0 ? 100 : completedCheckItems / totalCheckItems * 100;\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: clsx(classes.root, className)\n  }, rest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SvgIcon, {\n    fontSize: \"small\",\n    color: \"action\",\n    className: classes.listIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  })), editingName ? /*#__PURE__*/React.createElement(Box, {\n    flexGrow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    value: name,\n    fullWidth: true,\n    variant: \"outlined\",\n    onChange: handleNameChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    mt: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    size: \"small\",\n    variant: \"contained\",\n    onClick: handleNameSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, \"Save\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    onClick: handleNameCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))) : /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexGrow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    color: \"textPrimary\",\n    onClick: handleNameEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, checklist.name), /*#__PURE__*/React.createElement(Box, {\n    flexGrow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(Box, {\n    mt: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, parseInt(completePercentage, 10), \"%\"), /*#__PURE__*/React.createElement(Box, {\n    ml: 2,\n    flexGrow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LinearProgress, {\n    variant: \"determinate\",\n    value: completePercentage,\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Box, {\n    mt: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }, checklist.checkItems.map(function (checkItem) {\n    return /*#__PURE__*/React.createElement(CheckItem, {\n      editing: editingCheckItem === checkItem.id,\n      checkItem: checkItem,\n      card: card,\n      checklist: checklist,\n      key: checkItem.id,\n      onEditCancel: handleCheckItemEditCancel,\n      onEditComplete: handleCheckItemEditComplete,\n      onEditInit: function onEditInit() {\n        return handleCheckItemEditInit(checkItem.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    });\n  })), /*#__PURE__*/React.createElement(Box, {\n    mt: 1,\n    ml: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CheckItemAdd, {\n    card: card,\n    checklist: checklist,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  })));\n}\n\nChecklist.propTypes = {\n  className: PropTypes.string,\n  card: PropTypes.object.isRequired,\n  checklist: PropTypes.object.isRequired\n};\nexport default Checklist;","map":{"version":3,"sources":["/Users/sungwonjung/dev/nodejs/phr/client/src/views/kanban/KanbanView/CardEditModal/Checklist.js"],"names":["React","useState","useDispatch","PropTypes","clsx","useSnackbar","Box","Button","LinearProgress","Typography","TextField","SvgIcon","makeStyles","List","ListIcon","updateChecklist","deleteChecklist","CheckItem","CheckItemAdd","useStyles","theme","root","listIcon","marginRight","spacing","Checklist","card","checklist","className","rest","classes","dispatch","enqueueSnackbar","name","setName","editingName","setEditingName","editingCheckItem","setEditingCheckItem","handleNameEdit","handleNameChange","event","persist","target","value","handleNameSave","id","variant","handleNameCancel","handleDelete","handleCheckItemEditInit","checkItemId","handleCheckItemEditCancel","handleCheckItemEditComplete","totalCheckItems","checkItems","length","completedCheckItems","filter","checkItem","state","completePercentage","parseInt","map","propTypes","string","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Button,\n  LinearProgress,\n  Typography,\n  TextField,\n  SvgIcon,\n  makeStyles\n} from '@material-ui/core';\nimport { List as ListIcon } from 'react-feather';\nimport {\n  updateChecklist,\n  deleteChecklist\n} from 'src/actions/kanbanActions';\nimport CheckItem from './CheckItem';\nimport CheckItemAdd from './CheckItemAdd';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  listIcon: {\n    marginRight: theme.spacing(3)\n  }\n}));\n\nfunction Checklist({\n  card,\n  checklist,\n  className,\n  ...rest\n}) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { enqueueSnackbar } = useSnackbar();\n  const [name, setName] = useState(checklist.name);\n  const [editingName, setEditingName] = useState(null);\n  const [editingCheckItem, setEditingCheckItem] = useState(null);\n\n  const handleNameEdit = () => {\n    setEditingName(true);\n  };\n\n  const handleNameChange = (event) => {\n    event.persist();\n    setName(event.target.value);\n  };\n\n  const handleNameSave = async () => {\n    try {\n      if (!name || name === checklist.name) {\n        setEditingName(false);\n        setName(checklist.name);\n        return;\n      }\n\n      setEditingName(false);\n      await dispatch(updateChecklist(card.id, checklist.id, { name }));\n      enqueueSnackbar('Checklist updated', {\n        variant: 'success'\n      });\n    } catch (error) {\n      enqueueSnackbar('Ooops!', {\n        variant: 'error'\n      });\n    }\n  };\n\n  const handleNameCancel = () => {\n    setEditingName(false);\n    setName(checklist.name);\n  };\n\n  const handleDelete = async () => {\n    try {\n      await dispatch(deleteChecklist(card.id, checklist.id));\n      enqueueSnackbar('Checklist deleted', {\n        variant: 'success'\n      });\n    } catch (error) {\n      enqueueSnackbar('Ooops!', {\n        variant: 'error'\n      });\n    }\n  };\n\n  const handleCheckItemEditInit = (checkItemId) => {\n    setEditingCheckItem(checkItemId);\n  };\n\n  const handleCheckItemEditCancel = () => {\n    setEditingCheckItem(null);\n  };\n\n  const handleCheckItemEditComplete = () => {\n    setEditingCheckItem(null);\n  };\n\n  const totalCheckItems = checklist.checkItems.length;\n  const completedCheckItems = (checklist.checkItems.filter((checkItem) => checkItem.state === 'complete')).length;\n  const completePercentage = totalCheckItems === 0\n    ? 100\n    : (completedCheckItems / totalCheckItems) * 100;\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Box\n        display=\"flex\"\n      >\n        <SvgIcon\n          fontSize=\"small\"\n          color=\"action\"\n          className={classes.listIcon}\n        >\n          <ListIcon />\n        </SvgIcon>\n        {editingName ? (\n          <Box flexGrow={1}>\n            <TextField\n              value={name}\n              fullWidth\n              variant=\"outlined\"\n              onChange={handleNameChange}\n            />\n            <Box mt={1}>\n              <Button\n                color=\"primary\"\n                size=\"small\"\n                variant=\"contained\"\n                onClick={handleNameSave}\n              >\n                Save\n              </Button>\n              <Button\n                size=\"small\"\n                onClick={handleNameCancel}\n              >\n                Cancel\n              </Button>\n            </Box>\n          </Box>\n        ) : (\n          <Box\n            display=\"flex\"\n            alignItems=\"center\"\n            flexGrow={1}\n          >\n            <Typography\n              variant=\"h4\"\n              color=\"textPrimary\"\n              onClick={handleNameEdit}\n            >\n              {checklist.name}\n            </Typography>\n            <Box flexGrow={1} />\n            <Button\n              size=\"small\"\n              onClick={handleDelete}\n            >\n              Delete\n            </Button>\n          </Box>\n        )}\n      </Box>\n      <Box\n        mt={1}\n        display=\"flex\"\n        alignItems=\"center\"\n      >\n        <Typography\n          variant=\"caption\"\n          color=\"textSecondary\"\n        >\n          {parseInt(completePercentage, 10)}\n          %\n        </Typography>\n        <Box\n          ml={2}\n          flexGrow={1}\n        >\n          <LinearProgress\n            variant=\"determinate\"\n            value={completePercentage}\n            color=\"secondary\"\n          />\n        </Box>\n      </Box>\n      <Box mt={3}>\n        {checklist.checkItems.map((checkItem) => (\n          <CheckItem\n            editing={editingCheckItem === checkItem.id}\n            checkItem={checkItem}\n            card={card}\n            checklist={checklist}\n            key={checkItem.id}\n            onEditCancel={handleCheckItemEditCancel}\n            onEditComplete={handleCheckItemEditComplete}\n            onEditInit={() => handleCheckItemEditInit(checkItem.id)}\n          />\n        ))}\n      </Box>\n      <Box\n        mt={1}\n        ml={6}\n      >\n        <CheckItemAdd\n          card={card}\n          checklist={checklist}\n        />\n      </Box>\n    </div>\n  );\n}\n\nChecklist.propTypes = {\n  className: PropTypes.string,\n  card: PropTypes.object.isRequired,\n  checklist: PropTypes.object.isRequired\n};\n\nexport default Checklist;\n"]},"metadata":{},"sourceType":"module"}