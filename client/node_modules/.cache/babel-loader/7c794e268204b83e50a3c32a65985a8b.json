{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"src/utils/axios\";\nimport authService from \"src/services/authService\";\nexport var LOGIN_REQUEST = \"@account/login-request\";\nexport var LOGIN_SUCCESS = \"@account/login-success\";\nexport var LOGIN_FAILURE = \"@account/login-failure\";\nexport var SILENT_LOGIN = \"@account/silent-login\";\nexport var LOGOUT = \"@account/logout\";\nexport var REGISTER = \"@account/register\";\nexport var UPDATE_PROFILE = \"@account/update-profile\";\n\nvar qs = require(\"query-string\");\n\nvar Axios = require(\"axios\");\n\nexport function login(email, password) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              dispatch({\n                type: LOGIN_REQUEST\n              });\n              _context.next = 4;\n              return authService.loginWithEmailAndPassword(email, password);\n\n            case 4:\n              user = _context.sent;\n              // console.log(1, user);\n              dispatch({\n                type: LOGIN_SUCCESS,\n                payload: {\n                  user: user\n                }\n              });\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              dispatch({\n                type: LOGIN_FAILURE\n              });\n              throw _context.t0;\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}\nexport function setUserData(user) {\n  console.log(\"setUserData \", user);\n  return function (dispatch) {\n    return dispatch({\n      type: SILENT_LOGIN,\n      payload: {\n        user: user\n      }\n    });\n  };\n}\nexport function logout() {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              authService.logout();\n              dispatch({\n                type: LOGOUT\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n}\nexport function register(values) {\n  // return true;\n  var data = qs.stringify({\n    name: values.name,\n    email: values.email,\n    password: values.password\n  });\n  console.log(data);\n  var config = {\n    method: \"post\",\n    url: \"http://localhost:3100/signup\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    data: data\n  };\n  Axios(config).then(function (response) {\n    console.log(JSON.stringify(response.data));\n    return true;\n  }).catch(function (error) {\n    console.log(1, error);\n    return false;\n  });\n}\nexport function updateProfile(update) {\n  var request = axios.post(\"/api/account/profile\", {\n    update: update\n  });\n  return function (dispatch) {\n    request.then(function (response) {\n      return dispatch({\n        type: UPDATE_PROFILE,\n        payload: response.data\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/sungwonjung/dev/nodejs/phr/client/src/actions/accountActions.js"],"names":["axios","authService","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","SILENT_LOGIN","LOGOUT","REGISTER","UPDATE_PROFILE","qs","require","Axios","login","email","password","dispatch","type","loginWithEmailAndPassword","user","payload","setUserData","console","log","logout","register","values","data","stringify","name","config","method","url","headers","then","response","JSON","catch","error","updateProfile","update","request","post"],"mappings":"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","sourcesContent":["import axios from \"src/utils/axios\";\nimport authService from \"src/services/authService\";\n\nexport const LOGIN_REQUEST = \"@account/login-request\";\nexport const LOGIN_SUCCESS = \"@account/login-success\";\nexport const LOGIN_FAILURE = \"@account/login-failure\";\nexport const SILENT_LOGIN = \"@account/silent-login\";\nexport const LOGOUT = \"@account/logout\";\nexport const REGISTER = \"@account/register\";\nexport const UPDATE_PROFILE = \"@account/update-profile\";\nconst qs = require(\"query-string\");\nconst Axios = require(\"axios\");\n\nexport function login(email, password) {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tdispatch({ type: LOGIN_REQUEST });\n\n\t\t\tconst user = await authService.loginWithEmailAndPassword(email, password);\n\n\t\t\t// console.log(1, user);\n\n\t\t\tdispatch({\n\t\t\t\ttype: LOGIN_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatch({ type: LOGIN_FAILURE });\n\t\t\tthrow error;\n\t\t}\n\t};\n}\n\nexport function setUserData(user) {\n\tconsole.log(\"setUserData \", user);\n\treturn (dispatch) =>\n\t\tdispatch({\n\t\t\ttype: SILENT_LOGIN,\n\t\t\tpayload: {\n\t\t\t\tuser,\n\t\t\t},\n\t\t});\n}\n\nexport function logout() {\n\treturn async (dispatch) => {\n\t\tauthService.logout();\n\n\t\tdispatch({\n\t\t\ttype: LOGOUT,\n\t\t});\n\t};\n}\n\nexport function register(values) {\n\t// return true;\n\tconst data = qs.stringify({\n\t\tname: values.name,\n\t\temail: values.email,\n\t\tpassword: values.password,\n\t});\n\tconsole.log(data);\n\tconst config = {\n\t\tmethod: \"post\",\n\t\turl: \"http://localhost:3100/signup\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t},\n\t\tdata: data,\n\t};\n\n\tAxios(config)\n\t\t.then(function(response) {\n\t\t\tconsole.log(JSON.stringify(response.data));\n\t\t\treturn true;\n\t\t})\n\t\t.catch(function(error) {\n\t\t\tconsole.log(1, error);\n\t\t\treturn false;\n\t\t});\n}\n\nexport function updateProfile(update) {\n\tconst request = axios.post(\"/api/account/profile\", { update });\n\n\treturn (dispatch) => {\n\t\trequest.then((response) =>\n\t\t\tdispatch({\n\t\t\t\ttype: UPDATE_PROFILE,\n\t\t\t\tpayload: response.data,\n\t\t\t})\n\t\t);\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}