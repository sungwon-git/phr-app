{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sungwonjung/dev/nodejs/phr/client/src/layouts/DashboardLayout/TopBar/Account.js\";\nimport React, { useRef, useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport { Avatar, Box, ButtonBase, Hidden, Menu, MenuItem, Typography, makeStyles } from '@material-ui/core';\nimport { logout } from 'src/actions/accountActions';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    avatar: {\n      height: 32,\n      width: 32,\n      marginRight: theme.spacing(1)\n    },\n    popover: {\n      width: 200\n    }\n  };\n});\n\nfunction Account() {\n  var classes = useStyles();\n  var history = useHistory();\n  var ref = useRef(null);\n  var dispatch = useDispatch();\n  var account = useSelector(function (state) {\n    return state.account;\n  });\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      setOpen = _useState2[1];\n\n  var handleOpen = function handleOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var handleLogout = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              handleClose();\n              _context.next = 4;\n              return dispatch(logout());\n\n            case 4:\n              history.push('/');\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              enqueueSnackbar('Unable to logout', {\n                variant: 'error'\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function handleLogout() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    component: ButtonBase,\n    onClick: handleOpen,\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    alt: \"User\",\n    className: classes.avatar,\n    src: account.user.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Hidden, {\n    smDown: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, \"\".concat(account.user.firstName, \" \").concat(account.user.lastName)))), /*#__PURE__*/React.createElement(Menu, {\n    onClose: handleClose,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    keepMounted: true,\n    PaperProps: {\n      className: classes.popover\n    },\n    getContentAnchorEl: null,\n    anchorEl: ref.current,\n    open: isOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    component: RouterLink,\n    to: \"/app/social/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, \"Profile\"), /*#__PURE__*/React.createElement(MenuItem, {\n    component: RouterLink,\n    to: \"/app/account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"Account\"), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, \"Logout\")));\n}\n\nexport default Account;","map":{"version":3,"sources":["/Users/sungwonjung/dev/nodejs/phr/client/src/layouts/DashboardLayout/TopBar/Account.js"],"names":["React","useRef","useState","Link","RouterLink","useHistory","useDispatch","useSelector","useSnackbar","Avatar","Box","ButtonBase","Hidden","Menu","MenuItem","Typography","makeStyles","logout","useStyles","theme","avatar","height","width","marginRight","spacing","popover","Account","classes","history","ref","dispatch","account","state","enqueueSnackbar","isOpen","setOpen","handleOpen","handleClose","handleLogout","push","variant","user","firstName","lastName","vertical","horizontal","className","current"],"mappings":"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","sourcesContent":["import React, {\n  useRef,\n  useState\n} from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport {\n  Avatar,\n  Box,\n  ButtonBase,\n  Hidden,\n  Menu,\n  MenuItem,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport { logout } from 'src/actions/accountActions';\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    height: 32,\n    width: 32,\n    marginRight: theme.spacing(1)\n  },\n  popover: {\n    width: 200\n  }\n}));\n\nfunction Account() {\n  const classes = useStyles();\n  const history = useHistory();\n  const ref = useRef(null);\n  const dispatch = useDispatch();\n  const account = useSelector((state) => state.account);\n  const { enqueueSnackbar } = useSnackbar();\n  const [isOpen, setOpen] = useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleLogout = async () => {\n    try {\n      handleClose();\n      await dispatch(logout());\n      history.push('/');\n    } catch (error) {\n      enqueueSnackbar('Unable to logout', {\n        variant: 'error'\n      });\n    }\n  };\n\n  return (\n    <>\n      <Box\n        display=\"flex\"\n        alignItems=\"center\"\n        component={ButtonBase}\n        onClick={handleOpen}\n        ref={ref}\n      >\n        <Avatar\n          alt=\"User\"\n          className={classes.avatar}\n          src={account.user.avatar}\n        />\n        <Hidden smDown>\n          <Typography\n            variant=\"h6\"\n            color=\"inherit\"\n          >\n            {`${account.user.firstName} ${account.user.lastName}`}\n          </Typography>\n        </Hidden>\n      </Box>\n      <Menu\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        keepMounted\n        PaperProps={{ className: classes.popover }}\n        getContentAnchorEl={null}\n        anchorEl={ref.current}\n        open={isOpen}\n      >\n        <MenuItem\n          component={RouterLink}\n          to=\"/app/social/profile\"\n        >\n          Profile\n        </MenuItem>\n        <MenuItem\n          component={RouterLink}\n          to=\"/app/account\"\n        >\n          Account\n        </MenuItem>\n        <MenuItem onClick={handleLogout}>\n          Logout\n        </MenuItem>\n      </Menu>\n    </>\n  );\n}\n\nexport default Account;\n"]},"metadata":{},"sourceType":"module"}