{"ast":null,"code":"import _toConsumableArray from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sungwonjung/dev/nodejs/phr/client/src/views/phr/Records/Documents.js\";\nimport React, { useState } from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\nimport moment from \"moment\";\nimport { Avatar, Box, Button, Card, CardHeader, Checkbox, Divider, IconButton, InputAdornment, Link, SvgIcon, Table, TableBody, TableCell, TableHead, TablePagination, TableRow, TextField // Typography,\n, makeStyles } from \"@material-ui/core\";\nimport { Edit as EditIcon // ArrowRight as ArrowRightIcon,\n, Search as SearchIcon } from \"react-feather\";\nimport getInitials from \"src/utils/getInitials\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nvar sortOptions = [{\n  value: \"updatedAt|desc\",\n  label: \"Last update (newest first)\"\n}, {\n  value: \"updatedAt|asc\",\n  label: \"Last update (oldest first)\"\n}, {\n  value: \"orders|desc\",\n  label: \"Total orders (high to low)\"\n}, {\n  value: \"orders|asc\",\n  label: \"Total orders (low to high)\"\n}];\n\nfunction applyFilters(documents, query, filters) {\n  return documents.filter(function (documents) {\n    var matches = true;\n\n    if (query) {\n      var properties = [\"email\", \"name\"];\n      var containsQuery = false;\n      properties.forEach(function (property) {\n        if (documents[property].toLowerCase().includes(query.toLowerCase())) {\n          containsQuery = true;\n        }\n      });\n\n      if (!containsQuery) {\n        matches = false;\n      }\n    }\n\n    Object.keys(filters).forEach(function (key) {\n      var value = filters[key];\n\n      if (value && documents[key] !== value) {\n        matches = false;\n      }\n    });\n    return matches;\n  });\n}\n\nfunction applyPagination(documents, page, limit) {\n  return documents.slice(page * limit, page * limit + limit);\n}\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === \"desc\" ? function (a, b) {\n    return descendingComparator(a, b, orderBy);\n  } : function (a, b) {\n    return -descendingComparator(a, b, orderBy);\n  };\n}\n\nfunction applySort(documents, sort) {\n  var _sort$split = sort.split(\"|\"),\n      _sort$split2 = _slicedToArray(_sort$split, 2),\n      orderBy = _sort$split2[0],\n      order = _sort$split2[1];\n\n  var comparator = getComparator(order, orderBy);\n  var stabilizedThis = documents.map(function (el, index) {\n    return [el, index];\n  });\n  stabilizedThis.sort(function (a, b) {\n    // eslint-disable-next-line no-shadow\n    var order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(function (el) {\n    return el[0];\n  });\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    queryField: {\n      width: 500\n    },\n    bulkOperations: {\n      position: \"relative\"\n    },\n    bulkActions: {\n      paddingLeft: 4,\n      paddingRight: 4,\n      marginTop: 6,\n      position: \"absolute\",\n      width: \"100%\",\n      zIndex: 2,\n      backgroundColor: theme.palette.background.default\n    },\n    bulkAction: {\n      marginLeft: theme.spacing(2)\n    },\n    avatar: {\n      height: 42,\n      width: 42,\n      marginRight: theme.spacing(1)\n    }\n  };\n});\n\nfunction Documents(_ref) {\n  var _this = this;\n\n  var className = _ref.className,\n      rest = _objectWithoutProperties(_ref, [\"className\"]);\n\n  var classes = useStyles();\n  var documents = useSelector(function (state) {\n    return state.documents.documents;\n  });\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      page = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = useState(5),\n      _useState4 = _slicedToArray(_useState3, 2),\n      limit = _useState4[0],\n      setLimit = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      query = _useState6[0],\n      setQuery = _useState6[1];\n\n  var _useState7 = useState(sortOptions[0].value),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sort = _useState8[0],\n      setSort = _useState8[1];\n\n  var _useState9 = useState({\n    isProspect: null,\n    isReturning: null,\n    acceptsMarketing: null\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      filters = _useState10[0],\n      setFilters = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedDocuments = _useState12[0],\n      setSelectedDocuments = _useState12[1];\n\n  if (!documents) {\n    return null;\n  } // console.log(1, patients);\n\n\n  var handleQueryChange = function handleQueryChange(event) {\n    event.persist();\n    setQuery(event.target.value);\n  };\n\n  var handleSortChange = function handleSortChange(event) {\n    event.persist();\n    setSort(event.target.value);\n  };\n\n  var handleSelectAllDocuments = function handleSelectAllDocuments(event) {\n    setSelectedDocuments(event.target.checked ? documents.map(function (document) {\n      return document.documentID;\n    }) : []);\n  };\n\n  var handleSelectOneDocument = function handleSelectOneDocument(event, customerId) {\n    if (!selectedDocuments.includes(customerId)) {\n      setSelectedDocuments(function (prevSelected) {\n        return [].concat(_toConsumableArray(prevSelected), [customerId]);\n      });\n    } else {\n      setSelectedDocuments(function (prevSelected) {\n        return prevSelected.filter(function (id) {\n          return id !== customerId;\n        });\n      });\n    }\n  };\n\n  var handlePageChange = function handlePageChange(event, newPage) {\n    setPage(newPage);\n  };\n\n  var handleLimitChange = function handleLimitChange(event) {\n    setLimit(event.target.value);\n  }; // const handleButtonClick = (event, patientId) => {\n  //   // component={RouterLink}\n  //   // to={`/app/reports/dashboard/composition/${patient.id}`}\n  //   console.log('handleButtonClick - id', event.target.id);\n  //   console.log('handleButtonClick - value', event.target.value);\n  //   console.log('handleButtonClick - name', event.target.name);\n  //   console.log('handleButtonClick - patientId', patientId);\n  //   history.push(`/app/reports/dashboard/composition/${event.target.id}`);\n  // };\n  // Usually query is done on backend with indexing solutions\n  // console.log(selectedDocuments.length);\n\n\n  var filteredDocuments = applyFilters(documents, query, filters);\n  var sortedDocuments = applySort(filteredDocuments, sort);\n  var paginatetDocuments = applyPagination(sortedDocuments, page, limit);\n  var enableBulkOperations = selectedDocuments.length > 0;\n  var selectedSomeDocuments = selectedDocuments.length > 0 && selectedDocuments.length < documents.length;\n  var selectedAllDocuments = selectedDocuments.length === documents.length;\n  return /*#__PURE__*/React.createElement(Card, Object.assign({\n    className: clsx(classes.root, className)\n  }, rest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(CardHeader, {\n    title: \"Documents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    p: 2,\n    minHeight: 56,\n    display: \"flex\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    className: classes.queryField,\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(SvgIcon, {\n        fontSize: \"small\",\n        color: \"action\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(SearchIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 10\n        }\n      })))\n    },\n    onChange: handleQueryChange,\n    placeholder: \"Search patients\",\n    value: query,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    flexGrow: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Sort By\",\n    name: \"sort\",\n    onChange: handleSortChange,\n    select: true,\n    SelectProps: {\n      native: true\n    },\n    value: sort,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 5\n    }\n  }, sortOptions.map(function (option) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: option.value,\n      value: option.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 7\n      }\n    }, option.label);\n  }))), enableBulkOperations && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.bulkOperations,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.bulkActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: selectedAllDocuments,\n    indeterminate: selectedSomeDocuments,\n    onChange: handleSelectAllDocuments,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.bulkAction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }\n  }, \"Send\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.bulkAction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(PerfectScrollbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    minWidth: 700,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    padding: \"checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: selectedAllDocuments,\n    indeterminate: selectedSomeDocuments,\n    onChange: handleSelectAllDocuments,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  }, \"Organization\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }\n  }, \"Document ID\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  }, \"Encounter Date\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }\n  }, \"Author\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }\n  }, \"Dept\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }\n  }, \"Generated Date\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }\n  }, \"Actions\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }\n  }, paginatetDocuments.map(function (document) {\n    var isDocumentSelected = selectedDocuments.includes(document.documentID);\n    return /*#__PURE__*/React.createElement(TableRow, {\n      hover: true,\n      key: document.documentID,\n      selected: isDocumentSelected,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      padding: \"checkbox\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: isDocumentSelected,\n      onChange: function onChange(event) {\n        return handleSelectOneDocument(event, document.documentID);\n      },\n      value: isDocumentSelected,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 12\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      className: classes.avatar,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 13\n      }\n    }, getInitials(document.document.entry[4].resource.name)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      color: \"inherit\",\n      component: RouterLink,\n      to: \"/app/management/patients/1\",\n      variant: \"h6\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 14\n      }\n    }, getInitials(document.document.entry[4].resource.name))))), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }\n    }, document.documentID), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }\n    }, document.document.entry[0].resource.event[0].code[0].coding[0].code), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }\n    }, moment(document.document.entry[0].resource.date).format(\"YYYY-MM-DD\")), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }\n    }, document.document.entry[3].resource.name[0].text), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }\n    }, document.document.entry[2].resource.specialty[0].coding[0].display), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }\n    }, moment(document.document.timestamp).format(\"YYYY-MM-DD\")), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      component: RouterLink,\n      to: \"/phr/record/\".concat(document.documentID),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(SvgIcon, {\n      fontSize: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 14\n      }\n    })))));\n  }))))), /*#__PURE__*/React.createElement(TablePagination, {\n    component: \"div\",\n    count: filteredDocuments.length,\n    onChangePage: handlePageChange,\n    onChangeRowsPerPage: handleLimitChange,\n    page: page,\n    rowsPerPage: limit,\n    rowsPerPageOptions: [5, 10, 25],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    p: 2,\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    component: RouterLink,\n    size: \"small\",\n    to: \"/phr/records/categorization\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 5\n    }\n  }, \"See all\", /*#__PURE__*/React.createElement(NavigateNextIcon, {\n    className: classes.navigateNextIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 6\n    }\n  }))));\n}\n\nDocuments.propTypes = {\n  className: PropTypes.string // patients: PropTypes.array,\n\n}; // Documents.defaultProps = {\n// \t// patients: [],\n// };\n\nexport default Documents;","map":{"version":3,"sources":["/Users/sungwonjung/dev/nodejs/phr/client/src/views/phr/Records/Documents.js"],"names":["React","useState","Link","RouterLink","useSelector","clsx","PropTypes","PerfectScrollbar","moment","Avatar","Box","Button","Card","CardHeader","Checkbox","Divider","IconButton","InputAdornment","SvgIcon","Table","TableBody","TableCell","TableHead","TablePagination","TableRow","TextField","makeStyles","Edit","EditIcon","Search","SearchIcon","getInitials","NavigateNextIcon","sortOptions","value","label","applyFilters","documents","query","filters","filter","matches","properties","containsQuery","forEach","property","toLowerCase","includes","Object","keys","key","applyPagination","page","limit","slice","descendingComparator","a","b","orderBy","getComparator","order","applySort","sort","split","comparator","stabilizedThis","map","el","index","useStyles","theme","root","queryField","width","bulkOperations","position","bulkActions","paddingLeft","paddingRight","marginTop","zIndex","backgroundColor","palette","background","default","bulkAction","marginLeft","spacing","avatar","height","marginRight","Documents","className","rest","classes","state","setPage","setLimit","setQuery","setSort","isProspect","isReturning","acceptsMarketing","setFilters","selectedDocuments","setSelectedDocuments","handleQueryChange","event","persist","target","handleSortChange","handleSelectAllDocuments","checked","document","documentID","handleSelectOneDocument","customerId","prevSelected","id","handlePageChange","newPage","handleLimitChange","filteredDocuments","sortedDocuments","paginatetDocuments","enableBulkOperations","length","selectedSomeDocuments","selectedAllDocuments","startAdornment","native","option","isDocumentSelected","entry","resource","name","code","coding","date","format","text","specialty","display","timestamp","navigateNextIcon","propTypes","string"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\nimport moment from \"moment\";\nimport {\n\tAvatar,\n\tBox,\n\tButton,\n\tCard,\n\tCardHeader,\n\tCheckbox,\n\tDivider,\n\tIconButton,\n\tInputAdornment,\n\tLink,\n\tSvgIcon,\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableHead,\n\tTablePagination,\n\tTableRow,\n\tTextField,\n\t// Typography,\n\tmakeStyles,\n} from \"@material-ui/core\";\nimport {\n\tEdit as EditIcon,\n\t// ArrowRight as ArrowRightIcon,\n\tSearch as SearchIcon,\n} from \"react-feather\";\nimport getInitials from \"src/utils/getInitials\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\n\nconst sortOptions = [\n\t{\n\t\tvalue: \"updatedAt|desc\",\n\t\tlabel: \"Last update (newest first)\",\n\t},\n\t{\n\t\tvalue: \"updatedAt|asc\",\n\t\tlabel: \"Last update (oldest first)\",\n\t},\n\t{\n\t\tvalue: \"orders|desc\",\n\t\tlabel: \"Total orders (high to low)\",\n\t},\n\t{\n\t\tvalue: \"orders|asc\",\n\t\tlabel: \"Total orders (low to high)\",\n\t},\n];\n\nfunction applyFilters(documents, query, filters) {\n\treturn documents.filter((documents) => {\n\t\tlet matches = true;\n\n\t\tif (query) {\n\t\t\tconst properties = [\"email\", \"name\"];\n\t\t\tlet containsQuery = false;\n\n\t\t\tproperties.forEach((property) => {\n\t\t\t\tif (documents[property].toLowerCase().includes(query.toLowerCase())) {\n\t\t\t\t\tcontainsQuery = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!containsQuery) {\n\t\t\t\tmatches = false;\n\t\t\t}\n\t\t}\n\n\t\tObject.keys(filters).forEach((key) => {\n\t\t\tconst value = filters[key];\n\n\t\t\tif (value && documents[key] !== value) {\n\t\t\t\tmatches = false;\n\t\t\t}\n\t\t});\n\n\t\treturn matches;\n\t});\n}\n\nfunction applyPagination(documents, page, limit) {\n\treturn documents.slice(page * limit, page * limit + limit);\n}\n\nfunction descendingComparator(a, b, orderBy) {\n\tif (b[orderBy] < a[orderBy]) {\n\t\treturn -1;\n\t}\n\n\tif (b[orderBy] > a[orderBy]) {\n\t\treturn 1;\n\t}\n\n\treturn 0;\n}\n\nfunction getComparator(order, orderBy) {\n\treturn order === \"desc\" ? (a, b) => descendingComparator(a, b, orderBy) : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction applySort(documents, sort) {\n\tconst [orderBy, order] = sort.split(\"|\");\n\tconst comparator = getComparator(order, orderBy);\n\tconst stabilizedThis = documents.map((el, index) => [el, index]);\n\n\tstabilizedThis.sort((a, b) => {\n\t\t// eslint-disable-next-line no-shadow\n\t\tconst order = comparator(a[0], b[0]);\n\n\t\tif (order !== 0) return order;\n\n\t\treturn a[1] - b[1];\n\t});\n\n\treturn stabilizedThis.map((el) => el[0]);\n}\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {},\n\tqueryField: {\n\t\twidth: 500,\n\t},\n\tbulkOperations: {\n\t\tposition: \"relative\",\n\t},\n\tbulkActions: {\n\t\tpaddingLeft: 4,\n\t\tpaddingRight: 4,\n\t\tmarginTop: 6,\n\t\tposition: \"absolute\",\n\t\twidth: \"100%\",\n\t\tzIndex: 2,\n\t\tbackgroundColor: theme.palette.background.default,\n\t},\n\tbulkAction: {\n\t\tmarginLeft: theme.spacing(2),\n\t},\n\tavatar: {\n\t\theight: 42,\n\t\twidth: 42,\n\t\tmarginRight: theme.spacing(1),\n\t},\n}));\n\nfunction Documents({ className, ...rest }) {\n\tconst classes = useStyles();\n\tconst documents = useSelector((state) => state.documents.documents);\n\tconst [page, setPage] = useState(0);\n\tconst [limit, setLimit] = useState(5);\n\tconst [query, setQuery] = useState(\"\");\n\tconst [sort, setSort] = useState(sortOptions[0].value);\n\tconst [filters, setFilters] = useState({\n\t\tisProspect: null,\n\t\tisReturning: null,\n\t\tacceptsMarketing: null,\n\t});\n\tconst [selectedDocuments, setSelectedDocuments] = useState([]);\n\n\tif (!documents) {\n\t\treturn null;\n\t}\n\n\t// console.log(1, patients);\n\n\tconst handleQueryChange = (event) => {\n\t\tevent.persist();\n\t\tsetQuery(event.target.value);\n\t};\n\n\tconst handleSortChange = (event) => {\n\t\tevent.persist();\n\t\tsetSort(event.target.value);\n\t};\n\n\tconst handleSelectAllDocuments = (event) => {\n\t\tsetSelectedDocuments(event.target.checked ? documents.map((document) => document.documentID) : []);\n\t};\n\n\tconst handleSelectOneDocument = (event, customerId) => {\n\t\tif (!selectedDocuments.includes(customerId)) {\n\t\t\tsetSelectedDocuments((prevSelected) => [...prevSelected, customerId]);\n\t\t} else {\n\t\t\tsetSelectedDocuments((prevSelected) => prevSelected.filter((id) => id !== customerId));\n\t\t}\n\t};\n\n\tconst handlePageChange = (event, newPage) => {\n\t\tsetPage(newPage);\n\t};\n\n\tconst handleLimitChange = (event) => {\n\t\tsetLimit(event.target.value);\n\t};\n\n\t// const handleButtonClick = (event, patientId) => {\n\t//   // component={RouterLink}\n\t//   // to={`/app/reports/dashboard/composition/${patient.id}`}\n\t//   console.log('handleButtonClick - id', event.target.id);\n\t//   console.log('handleButtonClick - value', event.target.value);\n\t//   console.log('handleButtonClick - name', event.target.name);\n\n\t//   console.log('handleButtonClick - patientId', patientId);\n\t//   history.push(`/app/reports/dashboard/composition/${event.target.id}`);\n\t// };\n\n\t// Usually query is done on backend with indexing solutions\n\t// console.log(selectedDocuments.length);\n\tconst filteredDocuments = applyFilters(documents, query, filters);\n\tconst sortedDocuments = applySort(filteredDocuments, sort);\n\tconst paginatetDocuments = applyPagination(sortedDocuments, page, limit);\n\tconst enableBulkOperations = selectedDocuments.length > 0;\n\tconst selectedSomeDocuments = selectedDocuments.length > 0 && selectedDocuments.length < documents.length;\n\tconst selectedAllDocuments = selectedDocuments.length === documents.length;\n\n\treturn (\n\t\t<Card className={clsx(classes.root, className)} {...rest}>\n\t\t\t{/* <Tabs\n        onChange={handleTabsChange}\n        scrollButtons=\"auto\"\n        textColor=\"secondary\"\n        value={currentTab}\n        variant=\"scrollable\"\n      >\n        {tabs.map(tab => (\n          <Tab key={tab.value} value={tab.value} label={tab.label} />\n        ))}\n      </Tabs> */}\n\t\t\t<CardHeader title=\"Documents\" />\n\t\t\t<Divider />\n\t\t\t<Box p={2} minHeight={56} display=\"flex\" alignItems=\"center\">\n\t\t\t\t<TextField\n\t\t\t\t\tclassName={classes.queryField}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tstartAdornment: (\n\t\t\t\t\t\t\t<InputAdornment position=\"start\">\n\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"small\" color=\"action\">\n\t\t\t\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t\t\t\t</SvgIcon>\n\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t),\n\t\t\t\t\t}}\n\t\t\t\t\tonChange={handleQueryChange}\n\t\t\t\t\tplaceholder=\"Search patients\"\n\t\t\t\t\tvalue={query}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t/>\n\t\t\t\t<Box flexGrow={1} />\n\t\t\t\t<TextField label=\"Sort By\" name=\"sort\" onChange={handleSortChange} select SelectProps={{ native: true }} value={sort} variant=\"outlined\">\n\t\t\t\t\t{sortOptions.map((option) => (\n\t\t\t\t\t\t<option key={option.value} value={option.value}>\n\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</TextField>\n\t\t\t</Box>\n\t\t\t{enableBulkOperations && (\n\t\t\t\t<div className={classes.bulkOperations}>\n\t\t\t\t\t<div className={classes.bulkActions}>\n\t\t\t\t\t\t<Checkbox checked={selectedAllDocuments} indeterminate={selectedSomeDocuments} onChange={handleSelectAllDocuments} />\n\t\t\t\t\t\t<Button variant=\"outlined\" className={classes.bulkAction}>\n\t\t\t\t\t\t\tSend\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"outlined\" className={classes.bulkAction}>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<PerfectScrollbar>\n\t\t\t\t<Box minWidth={700}>\n\t\t\t\t\t<Table>\n\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\n\t\t\t\t\t\t\t\t\t<Checkbox checked={selectedAllDocuments} indeterminate={selectedSomeDocuments} onChange={handleSelectAllDocuments} />\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>Organization</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>Document ID</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>Type</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>Encounter Date</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>Author</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>Dept</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>Generated Date</TableCell>\n\t\t\t\t\t\t\t\t<TableCell align=\"right\">Actions</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{paginatetDocuments.map((document) => {\n\t\t\t\t\t\t\t\tconst isDocumentSelected = selectedDocuments.includes(document.documentID);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<TableRow hover key={document.documentID} selected={isDocumentSelected}>\n\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isDocumentSelected}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(event) => handleSelectOneDocument(event, document.documentID)}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={isDocumentSelected}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar className={classes.avatar}>{getInitials(document.document.entry[4].resource.name)}</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link color=\"inherit\" component={RouterLink} to=\"/app/management/patients/1\" variant=\"h6\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{getInitials(document.document.entry[4].resource.name)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/* <Typography variant=\"body2\" color=\"textSecondary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{patient.birthDate}({patient.gender})\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Typography> */}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{document.documentID}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{document.document.entry[0].resource.event[0].code[0].coding[0].code}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{moment(document.document.entry[0].resource.date).format(\"YYYY-MM-DD\")}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{document.document.entry[3].resource.name[0].text}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{document.document.entry[2].resource.specialty[0].coding[0].display}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{moment(document.document.timestamp).format(\"YYYY-MM-DD\")}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t<IconButton component={RouterLink} to={`/phr/record/${document.documentID}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t<SvgIcon fontSize=\"small\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<EditIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t</SvgIcon>\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</Box>\n\t\t\t</PerfectScrollbar>\n\t\t\t<TablePagination\n\t\t\t\tcomponent=\"div\"\n\t\t\t\tcount={filteredDocuments.length}\n\t\t\t\tonChangePage={handlePageChange}\n\t\t\t\tonChangeRowsPerPage={handleLimitChange}\n\t\t\t\tpage={page}\n\t\t\t\trowsPerPage={limit}\n\t\t\t\trowsPerPageOptions={[5, 10, 25]}\n\t\t\t/>\n\t\t\t<Box p={2} display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button component={RouterLink} size=\"small\" to=\"/phr/records/categorization\">\n\t\t\t\t\tSee all\n\t\t\t\t\t<NavigateNextIcon className={classes.navigateNextIcon} />\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t</Card>\n\t);\n}\n\nDocuments.propTypes = {\n\tclassName: PropTypes.string,\n\t// patients: PropTypes.array,\n};\n\n// Documents.defaultProps = {\n// \t// patients: [],\n// };\n\nexport default Documents;\n"]},"metadata":{},"sourceType":"module"}