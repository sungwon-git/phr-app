{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"src/utils/axios\";\nimport authService from \"src/services/authService\";\nexport var LOGIN_REQUEST = \"@account/login-request\";\nexport var LOGIN_SUCCESS = \"@account/login-success\";\nexport var LOGIN_FAILURE = \"@account/login-failure\";\nexport var SILENT_LOGIN = \"@account/silent-login\";\nexport var LOGOUT = \"@account/logout\";\nexport var REGISTER = \"@account/register\";\nexport var UPDATE_PROFILE = \"@account/update-profile\";\n\nvar qs = require(\"qs\");\n\nexport function login(email, password) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              dispatch({\n                type: LOGIN_REQUEST\n              });\n              _context.next = 4;\n              return authService.loginWithEmailAndPassword(email, password);\n\n            case 4:\n              user = _context.sent;\n              dispatch({\n                type: LOGIN_SUCCESS,\n                payload: {\n                  user: user\n                }\n              });\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              dispatch({\n                type: LOGIN_FAILURE\n              });\n              throw _context.t0;\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}\nexport function setUserData(user) {\n  return function (dispatch) {\n    return dispatch({\n      type: SILENT_LOGIN,\n      payload: {\n        user: user\n      }\n    });\n  };\n}\nexport function logout() {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              authService.logout();\n              dispatch({\n                type: LOGOUT\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n}\nexport function register() {\n  // return true;\n  var axios = require(\"axios\");\n\n  var qs = require(\"qs\");\n\n  var data = qs.stringify({\n    name: \"jung\",\n    email: \"phr@healthdata.com\",\n    password: \"11111\"\n  });\n  var config = {\n    method: \"post\",\n    url: \"localhost:3100/signup\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Cookie: \"connect.sid=s%3AUv1oE-B4ketzh9VlrALZP4Dn7X-fxOCq.uNem2gSEvur9f26JsNsbau7yX%2BDfODwjwYqyZ537jNM\"\n    },\n    data: data\n  };\n  axios(config).then(function (response) {\n    console.log(JSON.stringify(response.data));\n  }).catch(function (error) {\n    console.log(error);\n  });\n}\nexport function updateProfile(update) {\n  var request = axios.post(\"/api/account/profile\", {\n    update: update\n  });\n  return function (dispatch) {\n    request.then(function (response) {\n      return dispatch({\n        type: UPDATE_PROFILE,\n        payload: response.data\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/sungwonjung/dev/nodejs/phr/client/src/actions/accountActions.js"],"names":["axios","authService","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","SILENT_LOGIN","LOGOUT","REGISTER","UPDATE_PROFILE","qs","require","login","email","password","dispatch","type","loginWithEmailAndPassword","user","payload","setUserData","logout","register","data","stringify","name","config","method","url","headers","Cookie","then","response","console","log","JSON","catch","error","updateProfile","update","request","post"],"mappings":"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","sourcesContent":["import axios from \"src/utils/axios\";\nimport authService from \"src/services/authService\";\n\nexport const LOGIN_REQUEST = \"@account/login-request\";\nexport const LOGIN_SUCCESS = \"@account/login-success\";\nexport const LOGIN_FAILURE = \"@account/login-failure\";\nexport const SILENT_LOGIN = \"@account/silent-login\";\nexport const LOGOUT = \"@account/logout\";\nexport const REGISTER = \"@account/register\";\nexport const UPDATE_PROFILE = \"@account/update-profile\";\nconst qs = require(\"qs\");\n\nexport function login(email, password) {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tdispatch({ type: LOGIN_REQUEST });\n\n\t\t\tconst user = await authService.loginWithEmailAndPassword(email, password);\n\n\t\t\tdispatch({\n\t\t\t\ttype: LOGIN_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatch({ type: LOGIN_FAILURE });\n\t\t\tthrow error;\n\t\t}\n\t};\n}\n\nexport function setUserData(user) {\n\treturn (dispatch) =>\n\t\tdispatch({\n\t\t\ttype: SILENT_LOGIN,\n\t\t\tpayload: {\n\t\t\t\tuser,\n\t\t\t},\n\t\t});\n}\n\nexport function logout() {\n\treturn async (dispatch) => {\n\t\tauthService.logout();\n\n\t\tdispatch({\n\t\t\ttype: LOGOUT,\n\t\t});\n\t};\n}\n\nexport function register() {\n\t// return true;\n\tvar axios = require(\"axios\");\n\tvar qs = require(\"qs\");\n\tvar data = qs.stringify({\n\t\tname: \"jung\",\n\t\temail: \"phr@healthdata.com\",\n\t\tpassword: \"11111\",\n\t});\n\tvar config = {\n\t\tmethod: \"post\",\n\t\turl: \"localhost:3100/signup\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\tCookie: \"connect.sid=s%3AUv1oE-B4ketzh9VlrALZP4Dn7X-fxOCq.uNem2gSEvur9f26JsNsbau7yX%2BDfODwjwYqyZ537jNM\",\n\t\t},\n\t\tdata: data,\n\t};\n\n\taxios(config)\n\t\t.then(function(response) {\n\t\t\tconsole.log(JSON.stringify(response.data));\n\t\t})\n\t\t.catch(function(error) {\n\t\t\tconsole.log(error);\n\t\t});\n}\n\nexport function updateProfile(update) {\n\tconst request = axios.post(\"/api/account/profile\", { update });\n\n\treturn (dispatch) => {\n\t\trequest.then((response) =>\n\t\t\tdispatch({\n\t\t\t\ttype: UPDATE_PROFILE,\n\t\t\t\tpayload: response.data,\n\t\t\t})\n\t\t);\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}