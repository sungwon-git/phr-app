{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/sungwonjung/dev/nodejs/phr/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/sungwonjung/dev/nodejs/phr/client/src/views/phr/Records/DocumentsView/Details/CompositionInfo.js\";\n\n/* eslint-disable arrow-parens */\nimport React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { Box, Button, Card, CardHeader, Divider, Table, TableBody, TableCell, TableRow, Typography, Dialog, Link, makeStyles, DialogContent, DialogContentText, DialogTitle, DialogActions } from '@material-ui/core';\nimport Label from 'src/components/Label';\nimport CompositionMoreButton from 'src/components/CompositionMoreButton';\nimport ReactJson from 'react-json-view';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    fontWeightMedium: {\n      fontWeight: theme.typography.fontWeightMedium\n    },\n    actionIcon: {\n      marginRight: theme.spacing(1)\n    }\n  };\n});\n\nfunction CompositionInfo(_ref) {\n  var _this = this;\n\n  var composition = _ref.composition,\n      className = _ref.className,\n      rest = _objectWithoutProperties(_ref, [\"composition\", \"className\"]);\n\n  var classes = useStyles();\n  var title = \"Composition ID : \".concat(composition.id);\n  var encounterDate = moment(composition.date).format('YYYY-MM-DD HH:mm:SS');\n  var sections = composition.section;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      resource = _React$useState4[0],\n      setResource = _React$useState4[1];\n\n  var _React$useState5 = React.useState(),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      dialogTitle = _React$useState6[0],\n      setDialogTitle = _React$useState6[1]; // let url;\n  // let resource;\n\n\n  var handleButtonClick = React.useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var resourceInfo, resourceName, resourceId, url, getResource;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              resourceInfo = e.target.id;\n              setDialogTitle(resourceInfo);\n              console.log(1, resourceInfo);\n              resourceInfo = resourceInfo.split('/');\n              resourceName = resourceInfo[0];\n              resourceId = resourceInfo[1];\n              url = \"http://localhost:4000/4_0_0/\".concat(resourceName, \"/\").concat(resourceId);\n\n              getResource = /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                  var config;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          config = {\n                            method: 'get',\n                            url: url // headers: {\n                            //   Authorization:\n                            //     'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjAyMjAxZTA1ZjI1MzgwMDE1Zjk4MDU3IiwiaWF0IjoxNjE0MTQxMjE1LCJleHAiOjE2MTY3MzMyMTUsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjMwMDAiLCJpc3MiOiJzYW1zdW5nIG1lZGljYWwgY2VudGVyIiwic3ViIjoiYWRtaW5Ac21jLmNvbSJ9.1ykOVKtab7g9dUUCg5_tDzR4yYz-TVf3g5Giv4IHJlJXcfF8624yL9KBBnkKoKdsHBtmBO3Eu7BQ4YWSBFHK08NmV3w9Ukub5jSElTuRKggk8_HJeQ4_aqDrHvygwiEDntMiBQujUTKIapWgnz_WfVLJerPe31_xCgco7wAAdtY'\n                            // }\n\n                          };\n                          _context.next = 3;\n                          return axios(config).then(function (response) {\n                            // resource = response.data;\n                            setResource(response.data);\n                          }).catch(function (error) {\n                            console.log(error);\n                          });\n\n                        case 3:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function getResource() {\n                  return _ref3.apply(this, arguments);\n                };\n              }();\n\n              _context2.next = 10;\n              return getResource();\n\n            case 10:\n              setOpen(true);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), []); // console.log(resource);\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/React.createElement(Card, Object.assign({\n    className: clsx(classes.root, className)\n  }, rest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CardHeader, {\n    action: /*#__PURE__*/React.createElement(CompositionMoreButton, {\n      compositionid: composition.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }),\n    title: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.fontWeightMedium,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, \"Subject\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    id: composition.subject.reference,\n    variant: \"h6\",\n    onClick: handleButtonClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, composition.subject.reference)), /*#__PURE__*/React.createElement(Label, {\n    color: composition.id ? 'success' : 'error',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, composition.id ? 'Success' : 'Fail'))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.fontWeightMedium,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, encounterDate))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.fontWeightMedium,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"Author\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    id: composition.author[0].reference,\n    variant: \"h6\",\n    onClick: handleButtonClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, composition.author[0].reference)))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.fontWeightMedium,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, \"Custodian\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    id: composition.custodian.reference,\n    variant: \"h6\",\n    onClick: handleButtonClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, composition.custodian.reference)))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.fontWeightMedium,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, composition.event[0].code[0].coding[0].display))), sections.map(function (section) {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: section.code.coding[0].code,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.fontWeightMedium,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, section.title), /*#__PURE__*/React.createElement(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, section.entry.map(function (entry) {\n      return /*#__PURE__*/React.createElement(Typography, {\n        key: entry.reference,\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        color: \"inherit\",\n        id: entry.reference,\n        variant: \"h6\",\n        onClick: handleButtonClick,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }\n      }, entry.reference));\n    })));\n  }))), /*#__PURE__*/React.createElement(Box, {\n    p: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Dialog, {\n    onClose: handleClose,\n    open: open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, dialogTitle), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ReactJson, {\n    src: resource,\n    theme: \"monokai\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, \"Close\"))));\n}\n\nCompositionInfo.propTypes = {\n  className: PropTypes.string,\n  composition: PropTypes.object.isRequired\n};\nexport default CompositionInfo;","map":{"version":3,"sources":["/Users/sungwonjung/dev/nodejs/phr/client/src/views/phr/Records/DocumentsView/Details/CompositionInfo.js"],"names":["React","Link","RouterLink","PropTypes","clsx","axios","moment","Box","Button","Card","CardHeader","Divider","Table","TableBody","TableCell","TableRow","Typography","Dialog","makeStyles","DialogContent","DialogContentText","DialogTitle","DialogActions","Label","CompositionMoreButton","ReactJson","useStyles","theme","root","fontWeightMedium","fontWeight","typography","actionIcon","marginRight","spacing","CompositionInfo","composition","className","rest","classes","title","id","encounterDate","date","format","sections","section","useState","open","setOpen","resource","setResource","dialogTitle","setDialogTitle","handleButtonClick","useCallback","e","resourceInfo","target","console","log","split","resourceName","resourceId","url","getResource","config","method","then","response","data","catch","error","handleClose","subject","reference","author","custodian","event","code","coding","display","map","entry","propTypes","string","object","isRequired"],"mappings":";;;;;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAI,IAAIC,UAAjB,QAAmC,kBAAnC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SACEC,GADF,EAEEC,MAFF,EAGEC,IAHF,EAIEC,UAJF,EAKEC,OALF,EAMEC,KANF,EAOEC,SAPF,EAQEC,SARF,EASEC,QATF,EAUEC,UAVF,EAWEC,MAXF,EAYEhB,IAZF,EAaEiB,UAbF,EAcEC,aAdF,EAeEC,iBAfF,EAgBEC,WAhBF,EAiBEC,aAjBF,QAkBO,mBAlBP;AAmBA,OAAOC,KAAP,MAAkB,sBAAlB;AACA,OAAOC,qBAAP,MAAkC,sCAAlC;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AAEA,IAAMC,SAAS,GAAGR,UAAU,CAAC,UAAAS,KAAK;AAAA,SAAK;AACrCC,IAAAA,IAAI,EAAE,EAD+B;AAErCC,IAAAA,gBAAgB,EAAE;AAChBC,MAAAA,UAAU,EAAEH,KAAK,CAACI,UAAN,CAAiBF;AADb,KAFmB;AAKrCG,IAAAA,UAAU,EAAE;AACVC,MAAAA,WAAW,EAAEN,KAAK,CAACO,OAAN,CAAc,CAAd;AADH;AALyB,GAAL;AAAA,CAAN,CAA5B;;AAUA,SAASC,eAAT,OAA8D;AAAA;;AAAA,MAAnCC,WAAmC,QAAnCA,WAAmC;AAAA,MAAtBC,SAAsB,QAAtBA,SAAsB;AAAA,MAARC,IAAQ;;AAC5D,MAAMC,OAAO,GAAGb,SAAS,EAAzB;AAEA,MAAMc,KAAK,8BAAuBJ,WAAW,CAACK,EAAnC,CAAX;AACA,MAAMC,aAAa,GAAGpC,MAAM,CAAC8B,WAAW,CAACO,IAAb,CAAN,CAAyBC,MAAzB,CAAgC,qBAAhC,CAAtB;AACA,MAAMC,QAAQ,GAAGT,WAAW,CAACU,OAA7B;;AAEA,wBAAwB9C,KAAK,CAAC+C,QAAN,CAAe,KAAf,CAAxB;AAAA;AAAA,MAAOC,IAAP;AAAA,MAAaC,OAAb;;AACA,yBAAgCjD,KAAK,CAAC+C,QAAN,EAAhC;AAAA;AAAA,MAAOG,QAAP;AAAA,MAAiBC,WAAjB;;AACA,yBAAsCnD,KAAK,CAAC+C,QAAN,EAAtC;AAAA;AAAA,MAAOK,WAAP;AAAA,MAAoBC,cAApB,uBAT4D,CAU5D;AACA;;;AAEA,MAAMC,iBAAiB,GAAGtD,KAAK,CAACuD,WAAN;AAAA,yEAAkB,kBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACtCC,cAAAA,YADsC,GACvBD,CAAC,CAACE,MAAF,CAASjB,EADc;AAE1CY,cAAAA,cAAc,CAACI,YAAD,CAAd;AACAE,cAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ,EAAeH,YAAf;AACAA,cAAAA,YAAY,GAAGA,YAAY,CAACI,KAAb,CAAmB,GAAnB,CAAf;AACMC,cAAAA,YALoC,GAKrBL,YAAY,CAAC,CAAD,CALS;AAMpCM,cAAAA,UANoC,GAMvBN,YAAY,CAAC,CAAD,CANW;AAOpCO,cAAAA,GAPoC,yCAOCF,YAPD,cAOiBC,UAPjB;;AASpCE,cAAAA,WAToC;AAAA,qFAStB;AAAA;AAAA;AAAA;AAAA;AAAA;AACZC,0BAAAA,MADY,GACH;AACbC,4BAAAA,MAAM,EAAE,KADK;AAEbH,4BAAAA,GAAG,EAAHA,GAFa,CAGb;AACA;AACA;AACA;;AANa,2BADG;AAAA;AAAA,iCAUZ3D,KAAK,CAAC6D,MAAD,CAAL,CACHE,IADG,CACE,UAAAC,QAAQ,EAAI;AAChB;AACAlB,4BAAAA,WAAW,CAACkB,QAAQ,CAACC,IAAV,CAAX;AACD,2BAJG,EAKHC,KALG,CAKG,UAAAC,KAAK,EAAI;AACdb,4BAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACD,2BAPG,CAVY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBATsB;;AAAA,gCASpCP,WAToC;AAAA;AAAA;AAAA;;AAAA;AAAA,qBA6BpCA,WAAW,EA7ByB;;AAAA;AA8B1ChB,cAAAA,OAAO,CAAC,IAAD,CAAP;;AA9B0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAlB;;AAAA;AAAA;AAAA;AAAA,OA+BvB,EA/BuB,CAA1B,CAb4D,CA6C5D;;AAEA,MAAMwB,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxBxB,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,sBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAE7C,IAAI,CAACmC,OAAO,CAACX,IAAT,EAAeS,SAAf;AAArB,KAAoDC,IAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACE,oBAAC,UAAD;AACE,IAAA,MAAM,eAAE,oBAAC,qBAAD;AAAuB,MAAA,aAAa,EAAEF,WAAW,CAACK,EAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADV;AAEE,IAAA,KAAK,EAAED,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAKE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAOE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAED,OAAO,CAACV,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AACE,IAAA,KAAK,EAAC,SADR;AAEE,IAAA,EAAE,EAAEO,WAAW,CAACsC,OAAZ,CAAoBC,SAF1B;AAGE,IAAA,OAAO,EAAC,IAHV;AAIE,IAAA,OAAO,EAAErB,iBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMGlB,WAAW,CAACsC,OAAZ,CAAoBC,SANvB,CADF,CADF,eAWE,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEvC,WAAW,CAACK,EAAZ,GAAiB,SAAjB,GAA6B,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGL,WAAW,CAACK,EAAZ,GAAiB,SAAjB,GAA6B,MADhC,CAXF,CAFF,CADF,eAmBE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAEF,OAAO,CAACV,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGa,aADH,CADF,CAFF,CAnBF,eA2BE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAEH,OAAO,CAACV,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AACE,IAAA,KAAK,EAAC,SADR;AAEE,IAAA,EAAE,EAAEO,WAAW,CAACwC,MAAZ,CAAmB,CAAnB,EAAsBD,SAF5B;AAGE,IAAA,OAAO,EAAC,IAHV;AAIE,IAAA,OAAO,EAAErB,iBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMGlB,WAAW,CAACwC,MAAZ,CAAmB,CAAnB,EAAsBD,SANzB,CADF,CADF,CAFF,CA3BF,eAkDE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAEpC,OAAO,CAACV,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AACE,IAAA,KAAK,EAAC,SADR;AAEE,IAAA,EAAE,EAAEO,WAAW,CAACyC,SAAZ,CAAsBF,SAF5B;AAGE,IAAA,OAAO,EAAC,IAHV;AAIE,IAAA,OAAO,EAAErB,iBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMGlB,WAAW,CAACyC,SAAZ,CAAsBF,SANzB,CADF,CADF,CAJF,CAlDF,eAmEE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAEpC,OAAO,CAACV,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGO,WAAW,CAAC0C,KAAZ,CAAkB,CAAlB,EAAqBC,IAArB,CAA0B,CAA1B,EAA6BC,MAA7B,CAAoC,CAApC,EAAuCC,OAD1C,CADF,CAFF,CAnEF,EA2EGpC,QAAQ,CAACqC,GAAT,CAAa,UAAApC,OAAO;AAAA,wBACnB,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,OAAO,CAACiC,IAAR,CAAaC,MAAb,CAAoB,CAApB,EAAuBD,IAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAExC,OAAO,CAACV,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGiB,OAAO,CAACN,KADX,CADF,eAIE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGM,OAAO,CAACqC,KAAR,CAAcD,GAAd,CAAkB,UAAAC,KAAK;AAAA,0BACtB,oBAAC,UAAD;AACE,QAAA,GAAG,EAAEA,KAAK,CAACR,SADb;AAEE,QAAA,OAAO,EAAC,OAFV;AAGE,QAAA,KAAK,EAAC,eAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE,oBAAC,IAAD;AACE,QAAA,KAAK,EAAC,SADR;AAEE,QAAA,EAAE,EAAEQ,KAAK,CAACR,SAFZ;AAGE,QAAA,OAAO,EAAC,IAHV;AAIE,QAAA,OAAO,EAAErB,iBAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMG6B,KAAK,CAACR,SANT,CALF,CADsB;AAAA,KAAvB,CADH,CAJF,CADmB;AAAA,GAApB,CA3EH,CADF,CAPF,eA8GE,oBAAC,GAAD;AAAK,IAAA,CAAC,EAAE,CAAR;AAAW,IAAA,OAAO,EAAC,MAAnB;AAA0B,IAAA,aAAa,EAAC,QAAxC;AAAiD,IAAA,UAAU,EAAC,YAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA9GF,eAoHE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEF,WAAjB;AAA8B,IAAA,IAAI,EAAEzB,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAcI,WAAd,CADF,eAEE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,GAAG,EAAEF,QAAhB;AAA0B,IAAA,KAAK,EAAC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAHF,eAOE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,eAQE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEuB,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CARF,CApHF,CADF;AAmID;;AAEDtC,eAAe,CAACiD,SAAhB,GAA4B;AAC1B/C,EAAAA,SAAS,EAAElC,SAAS,CAACkF,MADK;AAE1BjD,EAAAA,WAAW,EAAEjC,SAAS,CAACmF,MAAV,CAAiBC;AAFJ,CAA5B;AAKA,eAAepD,eAAf","sourcesContent":["/* eslint-disable arrow-parens */\nimport React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport axios from 'axios';\nimport moment from 'moment';\nimport {\n  Box,\n  Button,\n  Card,\n  CardHeader,\n  Divider,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  Typography,\n  Dialog,\n  Link,\n  makeStyles,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  DialogActions\n} from '@material-ui/core';\nimport Label from 'src/components/Label';\nimport CompositionMoreButton from 'src/components/CompositionMoreButton';\nimport ReactJson from 'react-json-view';\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  fontWeightMedium: {\n    fontWeight: theme.typography.fontWeightMedium\n  },\n  actionIcon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\nfunction CompositionInfo({ composition, className, ...rest }) {\n  const classes = useStyles();\n\n  const title = `Composition ID : ${composition.id}`;\n  const encounterDate = moment(composition.date).format('YYYY-MM-DD HH:mm:SS');\n  const sections = composition.section;\n\n  const [open, setOpen] = React.useState(false);\n  const [resource, setResource] = React.useState();\n  const [dialogTitle, setDialogTitle] = React.useState();\n  // let url;\n  // let resource;\n\n  const handleButtonClick = React.useCallback(async e => {\n    let resourceInfo = e.target.id;\n    setDialogTitle(resourceInfo);\n    console.log(1, resourceInfo);\n    resourceInfo = resourceInfo.split('/');\n    const resourceName = resourceInfo[0];\n    const resourceId = resourceInfo[1];\n    const url = `http://localhost:4000/4_0_0/${resourceName}/${resourceId}`;\n\n    const getResource = async () => {\n      const config = {\n        method: 'get',\n        url\n        // headers: {\n        //   Authorization:\n        //     'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjAyMjAxZTA1ZjI1MzgwMDE1Zjk4MDU3IiwiaWF0IjoxNjE0MTQxMjE1LCJleHAiOjE2MTY3MzMyMTUsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjMwMDAiLCJpc3MiOiJzYW1zdW5nIG1lZGljYWwgY2VudGVyIiwic3ViIjoiYWRtaW5Ac21jLmNvbSJ9.1ykOVKtab7g9dUUCg5_tDzR4yYz-TVf3g5Giv4IHJlJXcfF8624yL9KBBnkKoKdsHBtmBO3Eu7BQ4YWSBFHK08NmV3w9Ukub5jSElTuRKggk8_HJeQ4_aqDrHvygwiEDntMiBQujUTKIapWgnz_WfVLJerPe31_xCgco7wAAdtY'\n        // }\n      };\n\n      await axios(config)\n        .then(response => {\n          // resource = response.data;\n          setResource(response.data);\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    };\n\n    await getResource();\n    setOpen(true);\n  }, []);\n  // console.log(resource);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Card className={clsx(classes.root, className)} {...rest}>\n      <CardHeader\n        action={<CompositionMoreButton compositionid={composition.id} />}\n        title={title}\n      />\n      <Divider />\n\n      <Table>\n        <TableBody>\n          <TableRow>\n            <TableCell className={classes.fontWeightMedium}>Subject</TableCell>\n            <TableCell>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                <Link\n                  color=\"inherit\"\n                  id={composition.subject.reference}\n                  variant=\"h6\"\n                  onClick={handleButtonClick}\n                >\n                  {composition.subject.reference}\n                </Link>\n              </Typography>\n              <Label color={composition.id ? 'success' : 'error'}>\n                {composition.id ? 'Success' : 'Fail'}\n              </Label>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell className={classes.fontWeightMedium}>Date</TableCell>\n            <TableCell>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {encounterDate}\n              </Typography>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell className={classes.fontWeightMedium}>Author</TableCell>\n            <TableCell>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                <Link\n                  color=\"inherit\"\n                  id={composition.author[0].reference}\n                  variant=\"h6\"\n                  onClick={handleButtonClick}\n                >\n                  {composition.author[0].reference}\n                </Link>\n              </Typography>\n            </TableCell>\n          </TableRow>\n          {/* <TableRow>\n            <TableCell className={classes.fontWeightMedium}>Attester</TableCell>\n            <TableCell>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {composition.attester[0].party.reference}\n              </Typography>\n            </TableCell>\n          </TableRow> */}\n          <TableRow>\n            <TableCell className={classes.fontWeightMedium}>\n              Custodian\n            </TableCell>\n            <TableCell>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                <Link\n                  color=\"inherit\"\n                  id={composition.custodian.reference}\n                  variant=\"h6\"\n                  onClick={handleButtonClick}\n                >\n                  {composition.custodian.reference}\n                </Link>\n              </Typography>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell className={classes.fontWeightMedium}>Type</TableCell>\n            <TableCell>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {composition.event[0].code[0].coding[0].display}\n              </Typography>\n            </TableCell>\n          </TableRow>\n          {sections.map(section => (\n            <TableRow key={section.code.coding[0].code}>\n              <TableCell className={classes.fontWeightMedium}>\n                {section.title}\n              </TableCell>\n              <TableCell>\n                {section.entry.map(entry => (\n                  <Typography\n                    key={entry.reference}\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                  >\n                    <Link\n                      color=\"inherit\"\n                      id={entry.reference}\n                      variant=\"h6\"\n                      onClick={handleButtonClick}\n                    >\n                      {entry.reference}\n                    </Link>\n                  </Typography>\n                ))}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n      <Box p={1} display=\"flex\" flexDirection=\"column\" alignItems=\"flex-start\">\n        {/* <Button>\n          <GetAppIcon className={classes.actionIcon} />\n          Show Document\n        </Button> */}\n      </Box>\n      <Dialog onClose={handleClose} open={open}>\n        <DialogTitle>{dialogTitle}</DialogTitle>\n        <Divider />\n        <DialogContent>\n          <ReactJson src={resource} theme=\"monokai\" />\n          {/* <DialogContentText> {resource} </DialogContentText> */}\n        </DialogContent>\n        <Divider />\n        <DialogActions>\n          <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </Card>\n  );\n}\n\nCompositionInfo.propTypes = {\n  className: PropTypes.string,\n  composition: PropTypes.object.isRequired\n};\n\nexport default CompositionInfo;\n"]},"metadata":{},"sourceType":"module"}